import{requestOGamePlanets}from"../services/request.ogamePlanets.js";export function getPlanets(protocol, host, universe, universeNum, universeLang){const planetResponse=requestOGamePlanets(protocol, host, universe, universeNum, universeLang).then(toPlanetResponse);return planetResponse.then(toPlanetMap)}function toPlanetMap(planetResponse){const uniquest=[...new Set(planetResponse.map((p=>p.player)))];const playerPlanets=uniquest.reduce(((acc,id)=>acc.set(id,[])),new Map);planetResponse.forEach((planet=>{const playerId=planet.player;let acc=playerPlanets.get(playerId);acc.push(planet);playerPlanets.set(playerId,acc)}));return playerPlanets}function toPlanetResponse(response){const doc=response.document.documentElement;return Array.from(doc.childNodes).map((node=>({id:parseInt(node.getAttribute("id"),10),player:parseInt(node.getAttribute("player"),10),name:node.getAttribute("name"),coords:node.getAttribute("coords"),moon:parseInt(node?.firstChild?.getAttribute("id")||0,0)})))}